import{c as ae,r as l,j as e,Z as ce,l as Z,A as E,x as z,B as L,L as _,_ as I,$ as O,y as f,a0 as le,Q as te,D as de}from"./index-TwdfaXd4.js";import{u as me,F as G,a as Y,b as B,c as Q,d as D,e as M,I as $,z as A,t as ue}from"./index-Bb22r9X0.js";import{C as H}from"./chevron-left-BAFd-DeY.js";import ee from"./Dashboard-BGxfnsrJ.js";import xe from"./Dashboard-OTA4abo-.js";/**
 * @license lucide-react v0.381.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=ae("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.381.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=ae("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),re=({label:s,name:a,register:o,errors:t,watch:r})=>{var p;const[i,m]=l.useState(!1),n=r(a)||"",{touchedFields:x}=me(),u=l.useMemo(()=>[{message:"At least 7 characters",isValid:n.length>=7},{message:"At least one lowercase letter [a-z]",isValid:/[a-z]/.test(n)},{message:"At least one uppercase letter [A-Z]",isValid:/[A-Z]/.test(n)},{message:"Number [0-9]",isValid:/\d/.test(n)},{message:"Special character [@$!%*#?&]",isValid:/[@$!%*#?&]/.test(n)}],[n]),c=()=>{m(!i)};return e.jsxs(G,{children:[e.jsx(Y,{children:s}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:i?"text":"password",...o(a),className:"px-3 py-2 border border-gray-300 focus:border-primaryRed focus:border-2 focus:ring-0 outline-none rounded w-full transition-colors duration-300 ease-in-out"}),e.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center cursor-pointer",onClick:c,children:i?e.jsx(J,{size:20}):e.jsx(K,{size:20})})]}),x[a]?e.jsx("ul",{className:"text-[10px] font-medium list-disc list-inside ",children:u.map((h,v)=>e.jsx("li",{className:h.isValid?"text-green-500":"text-red-500",children:h.message},v))}):t[a]&&e.jsx(B,{className:"text-[10px] font-medium ",children:(p=t[a])==null?void 0:p.message})]})},ie=({label:s,name:a,register:o,errors:t,watch:r})=>{var c;const[i,m]=l.useState(!1),n=r("password"),x=r(a),u=()=>{m(!i)};return e.jsxs(G,{children:[e.jsx(Y,{children:s}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:i?"text":"password",...o(a),className:"px-3 py-2 border border-gray-300 focus:border-primaryRed focus:border-2 focus:ring-0 outline-none rounded w-full transition-colors duration-300 ease-in-out"}),e.jsxs("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center cursor-pointer",onClick:u,children:[i?e.jsx(J,{size:20}):e.jsx(K,{size:20})," "]})]}),x&&x!==n?e.jsx(B,{className:"text-[10px] font-medium",children:"Passwords do not match "}):t[a]&&e.jsxs(B,{className:"text-[10px] font-medium",children:[(c=t[a])==null?void 0:c.message," "]})]})},ne=({name:s,register:a,errors:o={},maxLength:t})=>{const{setValue:r}=Q(),[i,m]=l.useState(Array(t).fill("")),n=(u,c)=>{const{value:p}=u.target;if(p.length>1)return;const h=[...i];if(h[c]=p,m(h),p&&c<t-1){const S=document.querySelector(`input[name="${s}[${c+1}]"]`);S&&S.focus()}const v=h.join("");r(s,v,{shouldValidate:!0})},x=Array.from({length:t},(u,c)=>e.jsxs(ce.Fragment,{children:[e.jsx("input",{type:"text",name:`${s}[${c}]`,maxLength:1,value:i[c],className:`w-12 h-12 border ${o[s]?"border-primaryRed":"border-gray-300"} rounded-md text-center text-lg focus:border-primaryRed focus:ring-2 focus:ring-primaryRed`,onChange:p=>n(p,c),onFocus:p=>p.target.select(),"aria-label":`Digit ${c+1} of ${t}`,ref:a(`${s}[${c}]`)}),c<t-1&&e.jsx("span",{className:"mx-2 w-1 h-1 bg-gray-600 rounded-full"})]},c));return e.jsxs("div",{className:"flex items-center",children:[x,o[s]&&e.jsx("span",{className:"text-red-500 text-sm ml-4",children:o[s].message})]})},oe={initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50}},pe=()=>{const s=D(),{getValues:a}=s,o=Z(),[t,r]=l.useState(1),[i,m]=l.useState(!1),[n,x]=l.useState(!1),[u,c]=l.useState(0),[p,h]=l.useState(!1),[v,S]=l.useState(!1);l.useEffect(()=>{let y;return u>0?y=setInterval(()=>{c(w=>w-1)},1e3):S(!1),()=>clearInterval(y)},[u]);async function T(){var d,P,U,C;const{firstName:y,lastName:w,email:N,phone:b,password:F,password_confirmation:g}=a();x(!0);try{const k=await I.post(`${O}admin/register`,{firstName:y,lastName:w,email:N,phone:b,password:F,password_confirmation:g},{headers:{"Content-Type":"application/json",Accept:"application/json"}});((d=k==null?void 0:k.data)==null?void 0:d.success)===!0&&(f.success((P=k==null?void 0:k.data)==null?void 0:P.message),r(2))}catch(k){const X=k;(C=(U=X.response)==null?void 0:U.data)!=null&&C.message?f.error(X.response.data.message):f.error("An unexpected error occurred.")}x(!1)}async function V(){var w,N,b,F;const{email:y}=a();h(!0);try{const g=await I.post(`${O}admin/otp/regenerate`,{email:y},{headers:{"Content-Type":"application/json",Accept:"application/json"}});((w=g==null?void 0:g.data)==null?void 0:w.success)===!0&&(f.success((N=g==null?void 0:g.data)==null?void 0:N.message),c(60),S(!0))}catch(g){const d=g;(F=(b=d.response)==null?void 0:b.data)!=null&&F.message?f.error(d.response.data.message):f.error("An unexpected error occurred.")}h(!1)}async function j(){var N,b,F,g;const{email:y,otp:w}=a();m(!0);try{const d=await I.post(`${O}admin/verify/email`,{email:y,otp:w},{headers:{"Content-Type":"application/json",Accept:"application/json"}});((N=d==null?void 0:d.data)==null?void 0:N.success)===!0&&(o("/authentication?view=login"),f.success((b=d==null?void 0:d.data)==null?void 0:b.message))}catch(d){const P=d;(g=(F=P.response)==null?void 0:F.data)!=null&&g.message?f.error(P.response.data.message):f.error("An unexpected error occurred.")}m(!1)}const R=()=>{t>1&&r(t-1)};return e.jsx(M,{...s,children:e.jsxs(E,{mode:"wait",children:[t===1&&e.jsx(ge,{onSubmit:s.handleSubmit(T),signUpLoading:n},"form1"),t===2&&e.jsx(fe,{onSubmit:s.handleSubmit(j),onClick:V,regenOTPLoading:p,OTPLoading:i,goBack:R,resendTimer:u,isResendDisabled:v},"form2")]})})},ge=({onSubmit:s,signUpLoading:a})=>{const{register:o,formState:{errors:t},watch:r}=Q();return e.jsxs(z.form,{variants:oe,initial:"initial",animate:"animate",exit:"exit",onSubmit:s,className:"w-full max-w-sm grid grid-cols-2 gap-x-4 gap-y-3",children:[e.jsx($,{label:"First Name",name:"firstName",register:o,errors:t}),e.jsx($,{label:"Last Name",name:"lastName",register:o,errors:t}),e.jsx($,{label:"Email",name:"email",register:o,errors:t}),e.jsx($,{label:"Phone Number",name:"phone",register:o,errors:t}),e.jsx(re,{label:"Password",name:"password",register:o,errors:t,watch:r}),e.jsx(ie,{label:"Confirm Password",name:"password_confirmation",register:o,errors:t,watch:r}),e.jsx(L,{className:"col-span-2 bg-primaryRed duration-300 capitalize",type:"submit",disabled:a,children:a?e.jsx(_,{color:"#FFFFFF",size:"20"}):"Sign Up"})]})},fe=({onSubmit:s,onClick:a,goBack:o,OTPLoading:t,resendTimer:r,isResendDisabled:i})=>{const{register:m,formState:{errors:n}}=Q();return e.jsx(z.div,{variants:oe,initial:"initial",animate:"animate",exit:"exit",transition:{duration:.5},className:"w-full flex flex-col items-center justify-center gap-6",children:e.jsxs("form",{onSubmit:s,className:"w-full max-w-sm flex flex-col gap-4",children:[e.jsx(ne,{name:"otp",register:m,errors:n,maxLength:6}),e.jsx("div",{className:"flex justify-center items-center",children:e.jsxs("span",{className:"flex items-center m-0 text-gray-600 font-medium text-md tracking-tight leading-4",children:["You didn't get the OTP?"," ",e.jsx(L,{onClick:a,className:"ml-1 p-0 text-primaryRed bg-transparent hover:bg-transparent",disabled:i,children:i?`${r}s`:"Resend"})]})}),e.jsx(L,{className:"col-span-2 bg-primaryRed duration-300 capitalize",type:"submit",disabled:t,children:t?e.jsx(_,{color:"#FFFFFF",size:"20"}):"Submit"}),e.jsxs("button",{type:"button",onClick:o,className:"flex justify-end items-center",children:[e.jsx(H,{size:20,className:"text-gray-800"}),e.jsx("p",{className:"font-medium text-gray-800 text-base",children:"Back"})]})]})})},he=({label:s,name:a,register:o,errors:t,onForgotPasswordClick:r})=>{var x;const[i,m]=l.useState(!1),n=()=>{m(!i)};return e.jsxs(G,{children:[e.jsx(Y,{children:s}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:i?"text":"password",...o(a),className:"px-3 py-2 border border-gray-300 focus:border-primaryRed focus:border-2 focus:ring-0 outline-none rounded w-full transition-colors duration-300 ease-in-out"}),e.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center cursor-pointer",onClick:n,children:i?e.jsx(J,{size:20}):e.jsx(K,{size:20})})]}),t[a]&&e.jsx(B,{className:"text-[10px] font-medium",children:(x=t[a])==null?void 0:x.message}),a==="password"&&e.jsx("div",{className:"mt-2 w-full flex justify-end",children:e.jsx("a",{href:"#",onClick:u=>{u.preventDefault(),r()},className:"text-primaryRed hover:underline text-[12px] font-medium",children:"Forgot password?"})})]})},je=({onForgotPasswordClick:s})=>{const a=D(),{getValues:o,handleSubmit:t,formState:{errors:r}}=a,[i,m]=l.useState(!1),[n,x]=l.useState(null),u=Z();l.useEffect(()=>{n&&u({system_admin:"/admin/dashboard",admin:"/admin/dashboard",organization:"/admin/organizationdashboard",staff:"/admin/staffdashboard"}[n]||"/admin/staffdashboard")},[n,u]);async function c(){var v,S,T,V;const{email:p,password:h}=o();m(!0);try{const j=await I.post(`${O}admin/login`,{email:p,password:h},{headers:{"Content-Type":"application/json",Accept:"application/json"}});if((v=j==null?void 0:j.data)!=null&&v.success){const{token:R,user:y}=j.data,{user_type:w}=y;localStorage.setItem("userType",w),localStorage.setItem("userToken",R),localStorage.setItem("organizationId",y.user_company_id),localStorage.setItem("userCompanyId",y.user_company_id),x(w),f.success((S=j==null?void 0:j.data)==null?void 0:S.message)}}catch(j){const R=j;(V=(T=R.response)==null?void 0:T.data)!=null&&V.message?f.error(R.response.data.message):f.error("An unexpected error occurred.")}finally{m(!1)}}return e.jsxs(M,{...a,children:[e.jsxs("form",{onSubmit:t(c),className:"w-full max-w-sm flex flex-col gap-4",children:[e.jsx($,{label:"Email",name:"email",register:a.register,errors:r}),e.jsx(he,{label:"Password",name:"password",register:a.register,errors:r,onForgotPasswordClick:s}),e.jsx(L,{className:"col-span-2 bg-primaryRed duration-300 capitalize",type:"submit",disabled:i,children:i?e.jsx(_,{color:"#FFFFFF",size:"20"}):"Login"})]}),n==="system_admin"&&e.jsx(ee,{}),n==="admin"&&e.jsx(ee,{}),n==="organization"&&e.jsx(xe,{}),n==="staff"&&e.jsx(le,{})]})},ye={initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50}},we={initial:{opacity:0,x:-50},animate:{opacity:1,x:0},exit:{opacity:0,x:50}},be=()=>{const s=D(),{getValues:a,handleSubmit:o,formState:{errors:t,isSubmitting:r}}=s,[i,m]=l.useState(1),[n,x]=l.useState(!1),[u,c]=l.useState(!1),[p,h]=l.useState(0),[v,S]=l.useState(!1),{search:T}=te(),V=l.useMemo(()=>new URLSearchParams(T),[T]);l.useEffect(()=>{if(p>0){const N=setInterval(()=>h(b=>b-1),1e3);return()=>clearInterval(N)}else S(!1)},[p]);const j=async()=>{var b,F,g;const{email:N}=a();c(!0);try{const d=await I.post(`${O}admin/otp/regenerate`,{email:N},{headers:{"Content-Type":"application/json",Accept:"application/json"}});((b=d==null?void 0:d.data)==null?void 0:b.success)===!0&&(m(2),f.success(d.data.message),h(60),S(!0))}catch(d){const P=d;(g=(F=P.response)==null?void 0:F.data)!=null&&g.message?f.error(P.response.data.message):f.error("An unexpected error occurred."),c(!1)}},R=async()=>{var d,P,U;const{email:N,otp:b,password:F,password_confirmation:g}=a();x(!0);try{const C=await I.post(`${O}admin/change/password`,{email:N,otp:b,password:F,password_confirmation:g},{headers:{"Content-Type":"application/json",Accept:"application/json"}});((d=C==null?void 0:C.data)==null?void 0:d.success)===!0&&(V.set("view","login"),f.success(C.data.message))}catch(C){const k=C;(U=(P=k.response)==null?void 0:P.data)!=null&&U.message?f.error(k.response.data.message):f.error("An unexpected error occurred."),x(!1)}},y=()=>{m(3)},w=()=>{i>1&&m(i-1)};return e.jsx(M,{...s,children:e.jsxs("div",{className:"w-full h-full flex flex-col gap-10 items-center justify-center relative",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("h1",{className:"text-gray-700 font-bold",children:"Forgot Password?"}),e.jsx(E,{mode:"wait",children:e.jsx(z.p,{className:"text-gray-600 font-bold",variants:we,initial:"initial",animate:"animate",exit:"exit",transition:{duration:.5},children:i===1?"Enter your email address":i===2?"Enter the OTP sent to email":"Enter your new password"},i)})]}),e.jsx("div",{className:"w-full flex flex-col items-center justify-center gap-6",children:e.jsxs(E,{mode:"wait",children:[i===1&&e.jsxs(q,{onSubmit:o(j),children:[e.jsx($,{label:"Email",name:"email",register:s.register,errors:t}),e.jsx(L,{className:"col-span-2 bg-primaryRed duration-300 capitalize",type:"submit",disabled:u,children:u?e.jsx(_,{color:"#FFFFFF",size:"20"}):"Get OTP"})]},"form1"),i===2&&e.jsxs(q,{onSubmit:o(y),children:[e.jsx(ne,{name:"otp",register:s.register,errors:t,maxLength:6}),e.jsx("div",{className:"flex justify-center items-center",children:e.jsxs("span",{className:"flex items-center m-0 text-gray-600 font-medium text-md tracking-tight leading-4",children:["You didn't get the OTP?"," ",e.jsx(L,{onClick:j,className:"ml-1 p-0 text-primaryRed bg-transparent hover:bg-transparent",disabled:v,children:v?`${p}s`:"Resend"})]})}),e.jsx(L,{className:"col-span-2 bg-primaryRed duration-300 capitalize",type:"submit",disabled:r,children:"Change Password"}),e.jsx(se,{goBack:w})]},"form2"),i===3&&e.jsxs(q,{onSubmit:o(R),children:[e.jsx(re,{label:"Password",name:"password",register:s.register,errors:t,watch:s.watch}),e.jsx(ie,{label:"Confirm Password",name:"password_confirmation",register:s.register,errors:t,watch:s.watch}),e.jsx(L,{className:"col-span-2 bg-primaryRed duration-300 capitalize",type:"submit",disabled:n,children:n?e.jsx(_,{color:"#FFFFFF",size:"20"}):" Change Password"}),e.jsx(se,{goBack:w})]},"form3")]})})]})})},q=({onSubmit:s,children:a})=>e.jsx(z.div,{variants:ye,initial:"initial",animate:"animate",exit:"exit",transition:{duration:.5},className:"w-full flex flex-col items-center justify-center gap-6",children:e.jsx("form",{onSubmit:s,className:"w-full max-w-sm flex flex-col gap-4",children:a})}),se=({goBack:s})=>e.jsx("div",{className:"w-full flex justify-end",children:e.jsxs("button",{type:"button",onClick:s,className:"flex items-center gap-2 text-gray-800",children:[e.jsx(H,{size:20}),e.jsx("p",{className:"font-medium text-base",children:"Back"})]})}),W=A.string().min(7,{message:"At least 7 characters"}),Ne=A.object({email:A.string().email({message:"Invalid email address"}),password:W}),Fe=A.object({firstName:A.string().min(2,{message:"At least 2 characters."}).max(30,{message:"At most 30 characters."}),lastName:A.string().min(2,{message:"At least 2 characters."}).max(30,{message:"At most 30 characters."}),email:A.string().email({message:"Invalid email address"}),phone:A.string().min(2,{message:"Enter phone number"}),password:W,password_confirmation:W}).refine(s=>s.password===s.password_confirmation,{message:"Passwords do not match",path:["password_confirmation"]}),Re=()=>{const s=te(),a=Z(),t=new URLSearchParams(s.search).get("view")||"login",[r,i]=l.useState(t),[m,n]=l.useState(null),x=D({resolver:ue(r==="signUp"?Fe:Ne)});l.useEffect(()=>{a(`/authentication?view=${r}`,{replace:!0})},[r,a]);const u=()=>{n(r),i("forgotPassword")},c=()=>{m&&(i(m),n(null))};return e.jsx(M,{...x,children:e.jsxs("div",{className:"w-screen h-screen flex overflow-hidden",children:[e.jsx("div",{className:"w-full h-full lg:flex md:flex sm:hidden hidden",children:e.jsx("img",{src:de,className:"object-cover w-full",alt:"Background"})}),e.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center relative",children:[r!=="login"&&r!=="signUp"&&e.jsxs(z.button,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},transition:{duration:.5},onClick:c,className:"absolute top-4 left-4 bg-transparent flex gap-1 p-2 rounded","aria-label":"Go back",children:[e.jsx(H,{size:20,className:"text-gray-800"}),e.jsx("p",{className:"font-medium text-gray-800 text-sm",children:"Back"})]},"backButton"),e.jsx(E,{mode:"wait",children:r==="forgotPassword"?e.jsx(z.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},transition:{duration:.5},className:"w-full flex flex-col items-center justify-center gap-6",children:e.jsx(be,{})},"forgotPassword"):e.jsxs(z.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:-50},transition:{duration:.5},className:"w-full flex flex-col items-center justify-center gap-6",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("h1",{className:"text-gray-700 font-bold",children:r==="signUp"?"Welcome!":"Welcome Back!"}),e.jsx("p",{className:"text-gray-600 font-bold",children:r==="signUp"?"Create your account":"Login to your account"})]}),r==="signUp"?e.jsx(pe,{}):e.jsx(je,{onForgotPasswordClick:u})]},r)}),r!=="forgotPassword"&&e.jsx(E,{mode:"wait",children:e.jsx(z.span,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:-50},transition:{duration:.5},className:"flex text-gray-600 font-medium mt-3",children:r==="signUp"?e.jsxs(e.Fragment,{children:["Already have an account?",e.jsx("button",{onClick:()=>i("login"),className:"ml-1 text-primaryRed","aria-label":"Log in",children:"Log in"})]}):e.jsxs(e.Fragment,{children:["Donâ€™t have an account?",e.jsx("button",{onClick:()=>i("signUp"),className:"ml-1 text-primaryRed","aria-label":"Sign up",children:"Sign Up"})]})},r==="signUp"?"signUpLink":"loginLink")})]})]})})};export{Re as default};
