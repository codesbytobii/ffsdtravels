import{r as s,y as u,j as e,B as $,a5 as k,a6 as v,a7 as w,_ as A,$ as D}from"./index-DBncHmhw.js";const E=()=>{const[x,h]=s.useState([]),[j,p]=s.useState(!0),[i,g]=s.useState(1),[P,C]=s.useState(1),[S,c]=s.useState(!1),f=a=>{const t=new Date(a),l=String(t.getDate()).padStart(2,"0"),r=String(t.getMonth()+1).padStart(2,"0"),n=t.getFullYear();return`${l}-${r}-${n}`};s.useEffect(()=>{const a=localStorage.getItem("userToken");if(!a){u.error("User token is missing. Please log in.");return}(async l=>{var r,n;try{const d=await A.get(`${D}permissions/all?page=${l}`,{headers:{Authorization:`Bearer ${a}`,Accept:"application/json"}}),{data:o,current_page:y,last_page:b}=d.data,N=o.map(m=>({...m,created_at:f(m.created_at),updated_at:f(m.updated_at)}));h(N),g(y),C(b),p(!1)}catch(d){const o=d;(n=(r=o.response)==null?void 0:r.data)!=null&&n.message?u.error(o.response.data.message):u.error("An unexpected error occurred.")}finally{p(!1)}})(i)},[i]);const _=[{header:"ID",accessor:"id"},{header:"Name",accessor:"name"},{header:"Created At",accessor:"created_at"}];return e.jsxs("div",{className:"flex flex-col ",children:[e.jsxs("div",{className:"flex gap-4 mt-5",children:[e.jsx($,{onClick:()=>c(!0),className:"bg-primaryRed text-white w-52 rounded capitalize","aria-label":"Create Permissions",children:"Create Permissions"}),e.jsx(k,{isOpen:S,onClose:()=>c(!1),children:e.jsx("div",{className:"flex flex-col lg:p-10 md:p-8 sm:p-6 p-4 pb-0 m-0",children:e.jsx("div",{className:"rounded-md flex items-center justify-between",children:e.jsx("button",{onClick:()=>c(!1),"aria-label":"Close",children:e.jsx(v,{size:30})})})})})]}),e.jsx("div",{className:"mt-7",children:e.jsx(w,{data:x,columns:_,isLoading:j,totalPages:P,currentPage:i,onPageChange:g})})]})};export{E as default};
